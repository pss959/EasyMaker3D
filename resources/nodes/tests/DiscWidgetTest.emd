Node "DiscWidgetTest" {
  TEMPLATES: [
    DiscWidget "T_Rotator" {
      # scaling_allowed: False,
      shapes: [
        Torus {
          outer_radius: 10,
          inner_radius: 1,
          sector_count: 8,
        },
      ]
    },
  ],

  # Rotate the whole setup.
  rotation: 1 1 -1 24,

  children: [
    Node {  # Background square.
      translation: 0 0 -12,
      shapes: [ Box { size: 100 60 .1 } ],
    },

    Node "RotationToolTest" {
      translation: 0 10 0,
      children: [
        Node "XRotator" {
          rotation: 0 0 1 -90,
          children: [
            CLONE "T_Rotator" "XRotator" { inactive_color: "#ff3333" }
          ],
        }
        Node "YRotator" {
          children: [
            CLONE "T_Rotator" "YRotator" { inactive_color: "#33ff33" }
          ],
        },
        Node "ZRotator" {
          rotation: 1 0 0 90,
          children: [
            CLONE "T_Rotator" "ZRotator" { inactive_color: "#3333ff" }
          ],
        },
        SphereWidget "FreeRotator" {
          inactive_color: "#dddddd20",
          active_color:   "#00000000",
          shapes: [ Ellipsoid { size: 18 18 18 } ],
        },
      ]
    },

    Node "Widgets" {
      TEMPLATES: [
        DiscWidget "T_DiscTest" {
          scale_range: .4 10,
          children: [
            Node "Disc" {
              scale: 30 4 30,
              shapes: [ Cylinder { sector_count: 40 } ],
            },
            Node "Knob" {
              blocks: [
                UniformBlock {
                  pass_name: $LIGHTING_PASS,
                  uniforms: [ Uniform "uBaseColor" { vec4f_val: "#112211" }, ],
                }
              ],
              scale: 5 5 5,
              translation: 15 1 .5,
              shapes: [ Ellipsoid {} ],
            }
          ],
        }
      ],

      translation: 0 -15 -6,

      children: [
        Node {
          rotation: 1 0 0 90,
          translation: -20 0 0,
          children: [
            CLONE "T_DiscTest" "DiscTestClamp" {
              angle_mode: "kClamp",
              inactive_color: "#bb6666",
            }
          ]
        },

        Node {
          rotation: 1 0 0 90,
          translation: 20 0 0,
          children: [
            CLONE "T_DiscTest" "DiscTestAccumulate" {
              angle_mode: "kAccumulate",
              inactive_color: "#6666bb",
            }
          ]
        },
      ]
    }
  ]
}
