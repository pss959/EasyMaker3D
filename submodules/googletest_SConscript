# -----------------------------------------------------------------------------
# Builds the Googletest (GTest) library.
# -----------------------------------------------------------------------------

Import('env')

gt_env = env.Clone()

#  -I/home/pss/git/IMakerVR/submodules/googletest/googletest/include
# -I/home/pss/git/IMakerVR/submodules/googletest/googletest
# -Wall -Wshadow
# -Wno-error=dangling-else -DGTEST_HAS_PTHREAD=1 -fexceptions -Wextra
# -Wno-unused-parameter -Wno-missing-field-initializers -o
# CMakeFiles/gtest.dir/src/gtest-all.cc.o -c
# /home/pss/git/IMakerVR/submodules/googletest/googletest/src/gtest-all.cc

gt_env.Replace(
    BUILD_DIR = '#build/googletest',  # Directory for build products.
    CPPDEFINES = [('GTEST_HAS_PTHREAD', '1')],
    CPPPATH    = [
        '#submodules/googletest/googletest',
        '#submodules/googletest/googletest/include',
    ],
    CXXFLAGS = [
        '-Wall',
        '-Wshadow',
        '-Wno-error=dangling-else',
        '-fexceptions',
        '-Wextra',
        '-Wno-unused-parameter',
        '-Wno-missing-field-initializers',
    ],
)

gt_env.VariantDir("$BUILD_DIR", 'googletest', duplicate = 0)

gt_env.Library('$BUILD_DIR/libgtest',
               '$BUILD_DIR/googletest/src/gtest-all.cc')
gt_env.Library('$BUILD_DIR/libgtest_main',
               '$BUILD_DIR/googletest/src/gtest_main.cc')

